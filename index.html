<!DOCTYPE html>
<html>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <head>
        <title>Mission Emission</title>
        <!-- D3js -->
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <!-- Library to for add multiple attributes at the same time -->
        <script src="https://d3js.org/d3-selection-multi.v0.4.min.js"></script>
        <!-- Map data -->
        <script src="https://d3js.org/topojson.v1.min.js"></script>
        <!-- jQuery -->
        <script src="https://code.jquery.com/jquery-2.0.0.js"></script>
        <!-- Bootstrap -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<!--Ajax we don't really need-->
  		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<!--Fafa icons-->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <!-- CSS code -->
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>

    <body onload="loadFunction()">
		
		<div class="col-sm-2" id="sidebar">
			
			<a href="index.html" class="logo"><img src="logo.png" alt="Logo" width="50" height="50" class="logo"></a>
	
			<p class="MissionEmission">Mission Emission</p>
			<!--<p>CO2 emission caused by boat export in Brazil 2014</p>-->
		</div>
		<div id=title class="col-sm-8">
			<h1>Export from Brazil</h1>
			
		</div>	
		<!--Dropdown menu-->
	    <div class="dropdown">
	      <input type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()">
	      <div id="countries-list" class="dropdown-content"></div>
	    </div>
  <img src="legend.png" alt="Legend" width="120" height="120" class="legend" class="col-sm-2">
	
		<!--Modal help-->
	    <div class="modal fade" id="helpModal" role="dialog">
			<div class="modal-dialog">
				<!-- Modal help-content-->
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">How it works</h4>
					</div>
					<div class="modal-body">
						Here, you see a world map in the middle of a sunburst. Both the sunburst and the map is interactive and you can explore this by clicking either on the sunburst or on the map. You can also click the search bar to see a list of countries and, of course, search for one, if you don't find it on the map or in the sunburst.
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
	  </div>
      <!-- Modal info-->
	  <div class="modal fade" id="infoModal" role="dialog">
		  <div class="modal-dialog">
			  <!-- Modal info-content-->
			  <div class="modal-content">
				  <div class="modal-header">
					  <button type="button" class="close" data-dismiss="modal">&times;</button>
					  <h4 class="modal-title">About us</h4>
				  </div>
				  <div class="modal-body">
					  <p>The goal of Mission Emission is to visualize the carbon dioxide emissions that comes from Brazil's export via shipments. We want the user to be able to explore where the ships are going and which countries that imports most from Brazil, in a carbon dioxide emmision point of view.</p>
				  </div>
				  <div class="modal-footer">
					  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				  </div>
			  </div>
		  </div>
		</div>
		
		<!--Info and help buttons-->
		<div class="bottom-align-text col-sm-2">
				<a data-toggle="modal" data-target="#helpModal" class="helperbtns"><i class="fa fa-question-circle" class="col-sm-12" style="font-size:48px;"></i></a>
				<a data-toggle="modal" data-target="#infoModal" class="helperbtns"><i class="fa fa-info-circle" class="col-sm-12" style="font-size:48px;"></i></a>
		</div>


		<!--Loader icon-->
		<div id="loader"></div>
		<div id="loadedDiv" class="animate-bottom">
			<!--Start of the sunburst-->
			<div class="container">
				<div id="map" class="col-xl-12"></div>
				<div id="sunburst" class="col-xl-12"></div>
			</div>
		</div>		
        <script src="map.js"></script>
        <script src="searchbar.js"></script>
        <script src="sunburst.js"></script>
		<script>
            // Load our data
            d3.queue()
            .defer(d3.json, "data.json")
            .defer(d3.json, "countries.topo.json")
            .await(render);
            function render(error,data, mapdata){
            	document.getElementById("loader").style.display = "none";
                // Draw the map
                drawmap(data,mapdata);
                // Give searchbar acess to the data
                searchbar(data);
                // Draw the sunburst
                drawSunburst(data);

                
            }
        </script>
    </body>
</html>
